{% extends 'base.html' %}

{% block head %}
    {{ super() }}
    {% block title %}
        <title>GitHubHealth: about</title>
    {% endblock %}
{% endblock %}

{% macro copy_button(button_id, target) %}
<button class="btn-copy tooltipped tooltipped-s" id="{{ button_id }}" data-clipboard-snippet data-clipboard-target="{{ target }}" aria-label="copied">
    <img src="{{ url_for('static', filename='clippy.svg') }}" width="13px">
</button>
{% endmacro %}

{% block body %}

    {% block navbar %}
    {% endblock %}

    {% block header %}
        {{ super() }}
    {% endblock %}

    {% block content %}
        <div class="about">
            <p>
                GitHubHealth is a hobby website. I am a data scientist looking for a fun side project to develop by app building skills.
            </p>
            <p>
                I started gathering metadata from <a href="https://github.com/">Github</a> for reports to help inform decisions about code clean up and refactoring.
            </p>
            <p>
                Diving deeper into the data from the Github api we can perform more complex analyses on code bases and create automated reporting, linting, test running etc.
            </p>
            <p>
                This app is built in <a href="https://flask.palletsprojects.com/en/2.0.x/">Flask</a> and uses the <a href="https://docs.github.com/en/rest">GitHub REST API</a> as implemented by <a href="https://github.com/PyGithub/PyGithub">PyGitHub</a>.
                GitHubHealth takes the data retrieved from the API calls and renders it in pandas dataframes and altair plots.
            </p>
            <p>
                To log in, you will need your login and <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">Github access token</a>.
                You can also provide a hostname (default is github.com) and timeout option (default 2 seconds).
                This web app should work for all hostnames but your enterprise may require SSL authentication to make requests.
            </p>
            <p>
                All the code is publicly available:
            </p>
            <p>
                Github
                https:
                <div class="code-snip" id="clone-https"><code>git clone https://github.com/ckear1989/github.git</code></div>
                {{ copy_button("copy-btn-https", "#clone-https") }}
            </p>
            <p>
                or ssh:
                <div class="code-snip" id="clone-ssh"><code>git clone git@github.com:ckear1989/github.git</code></div>
                {{ copy_button("copy-btn-ssh", "#clone-ssh") }}
            </p>
            <p>
                PyPi:
                <div class="code-snip" id="pip-install"><code>pip install GitHubHealth</code></div>
                {{ copy_button("copy-btn-pip", "#pip-install") }}
            </p>
        </div>
        {{ super() }}
    {% endblock %}

    {% block footer %}
        {{ super() }}
    {% endblock %}

    {% block scripts %}
        <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
        <script src="https://clipboardjs.com/bower_components/highlightjs/highlight.pack.min.js"></script>
        <script src="https://clipboardjs.com/assets/scripts/tooltips.js"></script>
        <script>
            // TODO figure out before and after actions
            let clipboardHttps = new ClipboardJS('#copy-btn-https');
            clipboardHttps.on('success', function(e) {
                console.info('Action:', e.action);
                console.info('Text:', e.text);
                console.info('Trigger:', e.trigger);

                e.clearSelection();
            });
            let clipboardSsh = new ClipboardJS('#copy-btn-ssh');
            clipboardSsh.on('success', function(e) {
                console.info('Action:', e.action);
                console.info('Text:', e.text);
                console.info('Trigger:', e.trigger);

                e.clearSelection();
            });
            let clipboardPip = new ClipboardJS('#copy-btn-pip');
            clipboardPip.on('success', function(e) {
                console.info('Action:', e.action);
                console.info('Text:', e.text);
                console.info('Trigger:', e.trigger);
        </script>

        {{ super() }}
    {% endblock %}

    <div name="warning">
        {{ warning }}
    </div>
    <div name="error">
        {{ error }}
    </div>
{% endblock %}
